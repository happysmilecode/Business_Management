[build]
  command = "echo SITE_RECAPTCHA_KEY=$SITE_RECAPTCHA_KEY >> .env.production && gatsby build"
  publish = "public"

[[headers]]
  for = "/*"
  [headers.values]
    # Content-Security-Policy = "default-src * data:; script-src https: 'unsafe-inline' 'unsafe-eval'; style-src https: 'unsafe-inline'; report-uri https://gimmix.report-uri.com/r/d/csp/reportOnly"
    Content-Security-Policy = "default-src https:; script-src 'self' 'unsafe-inline' 'strict-dynamic'; script-src-elem https://unpkg.com/; style-src 'self'; style-src-elem 'self' https://cdnjs.cloudflare.com/ https://maps.googleapis.com https://*.cloudfront.net/; style-src-attr 'self' https://pagead2.googlesyndication.com; img-src 'self' data: blob:; report-uri https://gimmix.report-uri.com/r/d/csp/reportOnly"
    X-Permitted-Cross-Domain-Policies = "none"
    X-Content-Type-Options = "nosniff"

    Expect-CT = 'enforce, max-age=31536000, report-uri="https://gimmix.report-uri.com/r/d/ct/reportOnly"'

    Permissions-Policy = 'geolocation=(self "https://gimmix.nl/*"), microphone=() fullscreen=(self "https://gimmix.nl/*"), camera=()'

    Strict-Transport-Security = "max-age=31536000; includeSubdomains; preload"

    Referrer-Policy = "no-referrer-when-downgrade"
    
  [Report-To]
    group = "default"
    max_age = 31_536_000
    include_subdomains = true

    [[Report-To.endpoints]]
      url = "https://gimmix.report-uri.com/a/d/g"

  [NEL]
    report_to = "default"
    max_age = 31_536_000
    include_subdomains = true